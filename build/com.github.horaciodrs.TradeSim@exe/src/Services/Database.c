/* Database.c generated by valac 0.40.23, the Vala compiler
 * generated from Database.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <sqlite3.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <gtk/gtk.h>


#define TRADE_SIM_SERVICES_TYPE_DATABASE (trade_sim_services_database_get_type ())
#define TRADE_SIM_SERVICES_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TRADE_SIM_SERVICES_TYPE_DATABASE, TradeSimServicesDatabase))
#define TRADE_SIM_SERVICES_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TRADE_SIM_SERVICES_TYPE_DATABASE, TradeSimServicesDatabaseClass))
#define TRADE_SIM_SERVICES_IS_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TRADE_SIM_SERVICES_TYPE_DATABASE))
#define TRADE_SIM_SERVICES_IS_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TRADE_SIM_SERVICES_TYPE_DATABASE))
#define TRADE_SIM_SERVICES_DATABASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TRADE_SIM_SERVICES_TYPE_DATABASE, TradeSimServicesDatabaseClass))

typedef struct _TradeSimServicesDatabase TradeSimServicesDatabase;
typedef struct _TradeSimServicesDatabaseClass TradeSimServicesDatabaseClass;
typedef struct _TradeSimServicesDatabasePrivate TradeSimServicesDatabasePrivate;
enum  {
	TRADE_SIM_SERVICES_DATABASE_0_PROPERTY,
	TRADE_SIM_SERVICES_DATABASE_NUM_PROPERTIES
};
static GParamSpec* trade_sim_services_database_properties[TRADE_SIM_SERVICES_DATABASE_NUM_PROPERTIES];
#define _sqlite3_close0(var) ((var == NULL) ? NULL : (var = (sqlite3_close (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _sqlite3_finalize0(var) ((var == NULL) ? NULL : (var = (sqlite3_finalize (var), NULL)))
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _TradeSimServicesDatabase {
	GObject parent_instance;
	TradeSimServicesDatabasePrivate * priv;
};

struct _TradeSimServicesDatabaseClass {
	GObjectClass parent_class;
};

struct _TradeSimServicesDatabasePrivate {
	sqlite3* db;
	gchar* db_path;
};


static gpointer trade_sim_services_database_parent_class = NULL;

GType trade_sim_services_database_get_type (void) G_GNUC_CONST;
#define TRADE_SIM_SERVICES_DATABASE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TRADE_SIM_SERVICES_TYPE_DATABASE, TradeSimServicesDatabasePrivate))
TradeSimServicesDatabase* trade_sim_services_database_new (gboolean skip_tables);
TradeSimServicesDatabase* trade_sim_services_database_construct (GType object_type,
                                                                 gboolean skip_tables);
static gint trade_sim_services_database_create_tables (TradeSimServicesDatabase* self);
void trade_sim_services_database_insert_provider (TradeSimServicesDatabase* self,
                                                  const gchar* _name,
                                                  const gchar* folder_name);
gint trade_sim_services_database_insert_market (TradeSimServicesDatabase* self,
                                                const gchar* _name,
                                                const gchar* _folder_name);
void trade_sim_services_database_insert_ticker (TradeSimServicesDatabase* self,
                                                const gchar* _name,
                                                gint _market_id);
gint trade_sim_services_database_get_id_if_market_exists (TradeSimServicesDatabase* self,
                                                          const gchar* _name);
gboolean trade_sim_services_database_is_database_empty (TradeSimServicesDatabase* self);
static void trade_sim_services_database_finalize (GObject * obj);


TradeSimServicesDatabase*
trade_sim_services_database_construct (GType object_type,
                                       gboolean skip_tables)
{
	TradeSimServicesDatabase * self = NULL;
	gint rc = 0;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp6_;
	sqlite3* _tmp7_ = NULL;
	gint _tmp8_;
	gint _tmp9_;
#line 8 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	self = (TradeSimServicesDatabase*) g_object_new (object_type, NULL);
#line 9 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	rc = 0;
#line 10 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp0_ = g_get_home_dir ();
#line 10 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp1_ = g_strconcat (_tmp0_, "/.local/share/com.github.horaciodrs.tradesim/database.db", NULL);
#line 10 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (self->priv->db_path);
#line 10 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	self->priv->db_path = _tmp1_;
#line 12 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	if (!skip_tables) {
#line 13 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		if (trade_sim_services_database_create_tables (self) != SQLITE_OK) {
#line 105 "Database.c"
			FILE* _tmp2_;
			gint _tmp3_;
			sqlite3* _tmp4_;
			const gchar* _tmp5_;
#line 14 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp2_ = stderr;
#line 14 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp3_ = rc;
#line 14 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp4_ = self->priv->db;
#line 14 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp5_ = sqlite3_errmsg (_tmp4_);
#line 14 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			fprintf (_tmp2_, "Error creating db table: %d, %s\n", _tmp3_, _tmp5_);
#line 15 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			gtk_main_quit ();
#line 122 "Database.c"
		}
	}
#line 19 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp6_ = self->priv->db_path;
#line 19 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp8_ = sqlite3_open (_tmp6_, &_tmp7_);
#line 19 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_close0 (self->priv->db);
#line 19 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	self->priv->db = _tmp7_;
#line 19 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	rc = _tmp8_;
#line 21 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp9_ = rc;
#line 21 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	if (_tmp9_ != SQLITE_OK) {
#line 139 "Database.c"
		FILE* _tmp10_;
		gint _tmp11_;
		sqlite3* _tmp12_;
		const gchar* _tmp13_;
#line 22 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp10_ = stderr;
#line 22 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp11_ = rc;
#line 22 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp12_ = self->priv->db;
#line 22 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp13_ = sqlite3_errmsg (_tmp12_);
#line 22 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		fprintf (_tmp10_, "Can't open database: %d, %s\n", _tmp11_, _tmp13_);
#line 23 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		gtk_main_quit ();
#line 156 "Database.c"
	}
#line 8 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	return self;
#line 160 "Database.c"
}


TradeSimServicesDatabase*
trade_sim_services_database_new (gboolean skip_tables)
{
#line 8 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	return trade_sim_services_database_construct (TRADE_SIM_SERVICES_TYPE_DATABASE, skip_tables);
#line 169 "Database.c"
}


static gint
_sqlite3_exec (sqlite3* self,
               const gchar* sql,
               sqlite3_callback callback,
               gpointer callback_target,
               gchar* * errmsg)
{
	gchar* _vala_errmsg = NULL;
	gint result = 0;
	const gchar* sqlite_errmsg = NULL;
	gint ec = 0;
	const gchar* _tmp0_ = NULL;
	gint _tmp1_;
	const gchar* _tmp4_;
#line 34 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	g_return_val_if_fail (self != NULL, 0);
#line 34 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	g_return_val_if_fail (sql != NULL, 0);
#line 36 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	_tmp1_ = sqlite3_exec (self, sql, callback, callback_target, (char**) (&_tmp0_));
#line 36 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	sqlite_errmsg = _tmp0_;
#line 36 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	ec = _tmp1_;
#line 37 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	if ((&_vala_errmsg) != NULL) {
#line 199 "Database.c"
		const gchar* _tmp2_;
		gchar* _tmp3_;
#line 38 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_tmp2_ = sqlite_errmsg;
#line 38 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_tmp3_ = g_strdup (_tmp2_);
#line 38 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_g_free0 (_vala_errmsg);
#line 38 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_vala_errmsg = _tmp3_;
#line 210 "Database.c"
	} else {
#line 40 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_g_free0 (_vala_errmsg);
#line 40 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_vala_errmsg = NULL;
#line 216 "Database.c"
	}
#line 42 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	_tmp4_ = sqlite_errmsg;
#line 42 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	sqlite3_free ((void*) _tmp4_);
#line 43 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	result = ec;
#line 43 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	if (errmsg) {
#line 43 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		*errmsg = _vala_errmsg;
#line 228 "Database.c"
	} else {
#line 43 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_g_free0 (_vala_errmsg);
#line 232 "Database.c"
	}
#line 43 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	return result;
#line 236 "Database.c"
}


static gint
trade_sim_services_database_create_tables (TradeSimServicesDatabase* self)
{
	gint result = 0;
	gint rc = 0;
	const gchar* _tmp0_;
	sqlite3* _tmp1_ = NULL;
	gint _tmp2_;
	gint _tmp3_;
	sqlite3* _tmp8_;
	sqlite3* _tmp9_;
	sqlite3* _tmp10_;
	sqlite3* _tmp11_;
	sqlite3* _tmp12_;
	sqlite3* _tmp13_;
	gint id_forex = 0;
#line 27 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 30 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp0_ = self->priv->db_path;
#line 30 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp2_ = sqlite3_open (_tmp0_, &_tmp1_);
#line 30 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_close0 (self->priv->db);
#line 30 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	self->priv->db = _tmp1_;
#line 30 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	rc = _tmp2_;
#line 32 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp3_ = rc;
#line 32 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	if (_tmp3_ != SQLITE_OK) {
#line 272 "Database.c"
		FILE* _tmp4_;
		gint _tmp5_;
		sqlite3* _tmp6_;
		const gchar* _tmp7_;
#line 33 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp4_ = stderr;
#line 33 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp5_ = rc;
#line 33 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp6_ = self->priv->db;
#line 33 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp7_ = sqlite3_errmsg (_tmp6_);
#line 33 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		fprintf (_tmp4_, "Can't open database: %d, %s\n", _tmp5_, _tmp7_);
#line 34 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		gtk_main_quit ();
#line 289 "Database.c"
	}
#line 37 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp8_ = self->priv->db;
#line 37 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	rc = _sqlite3_exec (_tmp8_, "CREATE TABLE IF NOT EXISTS providers (" "id             INTEGER PRIMARY KEY AUTOINCREMENT, " "name           TEXT    NOT NULL," "folder_name    TEXT    NOT NULL," "CONSTRAINT unique_provider UNIQUE (name))", NULL, NULL, NULL);
#line 42 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_debug ("Database.vala:42: Table provider created");
#line 44 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp9_ = self->priv->db;
#line 44 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	rc = _sqlite3_exec (_tmp9_, "CREATE TABLE IF NOT EXISTS markets (" "id             INTEGER PRIMARY KEY AUTOINCREMENT, " "name           TEXT    NOT NULL," "folder_name    TEXT    NOT NULL," "CONSTRAINT unique_market UNIQUE (name))", NULL, NULL, NULL);
#line 49 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_debug ("Database.vala:49: Table market created");
#line 51 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp10_ = self->priv->db;
#line 51 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	rc = _sqlite3_exec (_tmp10_, "CREATE TABLE IF NOT EXISTS tickers (" "id             INTEGER PRIMARY KEY AUTOINCREMENT, " "name           TEXT    NOT NULL," "market_id      INT     NOT NULL," "CONSTRAINT unique_ticker UNIQUE (name)," "FOREIGN KEY (market_id) REFERENCES markets (id) ON DELETE CASCADE)", NULL, NULL, NULL);
#line 57 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_debug ("Database.vala:57: Table tickers created");
#line 59 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp11_ = self->priv->db;
#line 59 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	rc = _sqlite3_exec (_tmp11_, "CREATE TABLE IF NOT EXISTS time_frames (" "id             INTEGER PRIMARY KEY AUTOINCREMENT, " "name           TEXT    NOT NULL," "CONSTRAINT unique_time_frame UNIQUE (name))", NULL, NULL, NULL);
#line 63 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_debug ("Database.vala:63: Table tickers created");
#line 65 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp12_ = self->priv->db;
#line 65 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	rc = _sqlite3_exec (_tmp12_, "CREATE TABLE IF NOT EXISTS quotes (" "id             INTEGER PRIMARY KEY AUTOINCREMENT, " "provider_id    INT     NOT NULL," "market_id      INT     NOT NULL," "ticker_id      INT     NOT NULL," "time_frame_id  INT     NOT NULL," "date_year      INT     NOT NULL," "date_month     INT     NOT NULL," "date_day       INT     NOT NULL," "date_hour      INT     NOT NULL," "date_minute    INT     NOT NULL," "price_open     REAL    NOT NULL," "price_close    REAL    NOT NULL," "price_max      REAL    NOT NULL," "price_min      REAL    NOT NULL)", NULL, NULL, NULL);
#line 82 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_debug ("Database.vala:82: Table tickers created");
#line 84 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp13_ = self->priv->db;
#line 84 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	rc = _sqlite3_exec (_tmp13_, "PRAGMA foreign_keys = ON;", NULL, NULL, NULL);
#line 86 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	trade_sim_services_database_insert_provider (self, "EODATA", "EODATA");
#line 87 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	trade_sim_services_database_insert_provider (self, "HistData.com", "HISTDATA");
#line 88 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	trade_sim_services_database_insert_provider (self, "Tradingview.com", "TVIEW");
#line 90 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	id_forex = trade_sim_services_database_insert_market (self, "Forex", "");
#line 92 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	trade_sim_services_database_insert_ticker (self, "EURUSD", id_forex);
#line 93 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	trade_sim_services_database_insert_ticker (self, "USDJPY", id_forex);
#line 94 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	trade_sim_services_database_insert_ticker (self, "GBPUSD", id_forex);
#line 96 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	result = rc;
#line 96 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	return result;
#line 343 "Database.c"
}


void
trade_sim_services_database_insert_provider (TradeSimServicesDatabase* self,
                                             const gchar* _name,
                                             const gchar* folder_name)
{
	sqlite3_stmt* stmt = NULL;
	gchar* sql = NULL;
	gint res = 0;
	gchar* _tmp0_;
	sqlite3* _tmp1_;
	const gchar* _tmp2_;
	sqlite3_stmt* _tmp3_ = NULL;
	gint _tmp4_;
	gint _tmp5_;
	sqlite3_stmt* _tmp6_;
	gchar* _tmp7_;
	GDestroyNotify _tmp8_;
	gint _tmp9_;
	sqlite3_stmt* _tmp10_;
	gchar* _tmp11_;
	GDestroyNotify _tmp12_;
	gint _tmp13_;
	sqlite3_stmt* _tmp14_;
	sqlite3_stmt* _tmp18_;
#line 99 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_if_fail (self != NULL);
#line 99 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_if_fail (_name != NULL);
#line 99 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_if_fail (folder_name != NULL);
#line 104 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp0_ = g_strdup (" INSERT OR IGNORE INTO providers (name, folder_name) VALUES (?, ?);  ");
#line 104 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (sql);
#line 104 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	sql = _tmp0_;
#line 106 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp1_ = self->priv->db;
#line 106 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp2_ = sql;
#line 106 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp4_ = sqlite3_prepare_v2 (_tmp1_, _tmp2_, -1, &_tmp3_, NULL);
#line 106 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 106 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	stmt = _tmp3_;
#line 106 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = _tmp4_;
#line 107 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp5_ = res;
#line 107 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp5_ == SQLITE_OK, "res == Sqlite.OK");
#line 109 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp6_ = stmt;
#line 109 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp7_ = g_strdup (_name);
#line 109 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp8_ = g_free;
#line 109 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp6_, 1, _tmp7_, -1, _tmp8_);
#line 110 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp9_ = res;
#line 110 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp9_ == SQLITE_OK, "res == Sqlite.OK");
#line 112 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp10_ = stmt;
#line 112 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp11_ = g_strdup (folder_name);
#line 112 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp12_ = g_free;
#line 112 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp10_, 2, _tmp11_, -1, _tmp12_);
#line 113 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp13_ = res;
#line 113 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp13_ == SQLITE_OK, "res == Sqlite.OK");
#line 115 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp14_ = stmt;
#line 115 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	if (sqlite3_step (_tmp14_) != SQLITE_DONE) {
#line 427 "Database.c"
		sqlite3* _tmp15_;
		sqlite3* _tmp16_;
		const gchar* _tmp17_;
#line 116 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp15_ = self->priv->db;
#line 116 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp16_ = self->priv->db;
#line 116 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp17_ = sqlite3_errmsg (_tmp16_);
#line 116 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		g_warning ("Database.vala:116: Error: %d: %s", sqlite3_errcode (_tmp15_), _tmp17_);
#line 439 "Database.c"
	}
#line 119 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp18_ = stmt;
#line 119 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	sqlite3_reset (_tmp18_);
#line 99 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (sql);
#line 99 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 449 "Database.c"
}


void
trade_sim_services_database_insert_ticker (TradeSimServicesDatabase* self,
                                           const gchar* _name,
                                           gint _market_id)
{
	sqlite3_stmt* stmt = NULL;
	gchar* sql = NULL;
	gint res = 0;
	gchar* _tmp0_;
	sqlite3* _tmp1_;
	const gchar* _tmp2_;
	sqlite3_stmt* _tmp3_ = NULL;
	gint _tmp4_;
	gint _tmp5_;
	sqlite3_stmt* _tmp6_;
	gchar* _tmp7_;
	GDestroyNotify _tmp8_;
	gint _tmp9_;
	sqlite3_stmt* _tmp10_;
	gint _tmp11_;
	sqlite3_stmt* _tmp12_;
	sqlite3_stmt* _tmp16_;
#line 123 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_if_fail (self != NULL);
#line 123 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_if_fail (_name != NULL);
#line 128 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp0_ = g_strdup (" INSERT OR IGNORE INTO tickers (name, market_id) VALUES (?, ?);  ");
#line 128 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (sql);
#line 128 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	sql = _tmp0_;
#line 130 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp1_ = self->priv->db;
#line 130 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp2_ = sql;
#line 130 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp4_ = sqlite3_prepare_v2 (_tmp1_, _tmp2_, -1, &_tmp3_, NULL);
#line 130 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 130 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	stmt = _tmp3_;
#line 130 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = _tmp4_;
#line 131 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp5_ = res;
#line 131 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp5_ == SQLITE_OK, "res == Sqlite.OK");
#line 133 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp6_ = stmt;
#line 133 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp7_ = g_strdup (_name);
#line 133 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp8_ = g_free;
#line 133 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp6_, 1, _tmp7_, -1, _tmp8_);
#line 134 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp9_ = res;
#line 134 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp9_ == SQLITE_OK, "res == Sqlite.OK");
#line 136 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp10_ = stmt;
#line 136 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = sqlite3_bind_int (_tmp10_, 2, _market_id);
#line 137 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp11_ = res;
#line 137 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp11_ == SQLITE_OK, "res == Sqlite.OK");
#line 139 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp12_ = stmt;
#line 139 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	if (sqlite3_step (_tmp12_) != SQLITE_DONE) {
#line 525 "Database.c"
		sqlite3* _tmp13_;
		sqlite3* _tmp14_;
		const gchar* _tmp15_;
#line 140 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp13_ = self->priv->db;
#line 140 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp14_ = self->priv->db;
#line 140 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp15_ = sqlite3_errmsg (_tmp14_);
#line 140 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		g_warning ("Database.vala:140: Error: %d: %s", sqlite3_errcode (_tmp13_), _tmp15_);
#line 537 "Database.c"
	}
#line 143 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp16_ = stmt;
#line 143 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	sqlite3_reset (_tmp16_);
#line 123 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (sql);
#line 123 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 547 "Database.c"
}


gint
trade_sim_services_database_insert_market (TradeSimServicesDatabase* self,
                                           const gchar* _name,
                                           const gchar* _folder_name)
{
	gint result = 0;
	sqlite3_stmt* stmt = NULL;
	gchar* sql = NULL;
	gint res = 0;
	gchar* _tmp0_;
	sqlite3* _tmp1_;
	const gchar* _tmp2_;
	sqlite3_stmt* _tmp3_ = NULL;
	gint _tmp4_;
	gint _tmp5_;
	sqlite3_stmt* _tmp6_;
	gchar* _tmp7_;
	GDestroyNotify _tmp8_;
	gint _tmp9_;
	sqlite3_stmt* _tmp10_;
	gchar* _tmp11_;
	GDestroyNotify _tmp12_;
	gint _tmp13_;
	sqlite3_stmt* _tmp14_;
	sqlite3_stmt* _tmp18_;
#line 147 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 147 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_val_if_fail (_name != NULL, 0);
#line 147 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_val_if_fail (_folder_name != NULL, 0);
#line 152 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp0_ = g_strdup (" INSERT OR IGNORE INTO markets (name, folder_name) VALUES (?, ?);  ");
#line 152 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (sql);
#line 152 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	sql = _tmp0_;
#line 154 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp1_ = self->priv->db;
#line 154 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp2_ = sql;
#line 154 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp4_ = sqlite3_prepare_v2 (_tmp1_, _tmp2_, -1, &_tmp3_, NULL);
#line 154 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 154 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	stmt = _tmp3_;
#line 154 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = _tmp4_;
#line 155 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp5_ = res;
#line 155 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp5_ == SQLITE_OK, "res == Sqlite.OK");
#line 157 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp6_ = stmt;
#line 157 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp7_ = g_strdup (_name);
#line 157 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp8_ = g_free;
#line 157 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp6_, 1, _tmp7_, -1, _tmp8_);
#line 158 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp9_ = res;
#line 158 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp9_ == SQLITE_OK, "res == Sqlite.OK");
#line 160 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp10_ = stmt;
#line 160 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp11_ = g_strdup (_folder_name);
#line 160 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp12_ = g_free;
#line 160 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp10_, 2, _tmp11_, -1, _tmp12_);
#line 161 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp13_ = res;
#line 161 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp13_ == SQLITE_OK, "res == Sqlite.OK");
#line 163 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp14_ = stmt;
#line 163 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	if (sqlite3_step (_tmp14_) != SQLITE_DONE) {
#line 632 "Database.c"
		sqlite3* _tmp15_;
		sqlite3* _tmp16_;
		const gchar* _tmp17_;
#line 164 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp15_ = self->priv->db;
#line 164 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp16_ = self->priv->db;
#line 164 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp17_ = sqlite3_errmsg (_tmp16_);
#line 164 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		g_warning ("Database.vala:164: Error: %d: %s", sqlite3_errcode (_tmp15_), _tmp17_);
#line 644 "Database.c"
	}
#line 167 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp18_ = stmt;
#line 167 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	sqlite3_reset (_tmp18_);
#line 169 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	result = trade_sim_services_database_get_id_if_market_exists (self, _name);
#line 169 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (sql);
#line 169 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 169 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	return result;
#line 658 "Database.c"
}


gint
trade_sim_services_database_get_id_if_market_exists (TradeSimServicesDatabase* self,
                                                     const gchar* _name)
{
	gint result = 0;
	sqlite3_stmt* stmt = NULL;
	gchar* sql = NULL;
	gint res = 0;
	gchar* _tmp0_;
	sqlite3* _tmp1_;
	const gchar* _tmp2_;
	sqlite3_stmt* _tmp3_ = NULL;
	gint _tmp4_;
	gint _tmp5_;
	sqlite3_stmt* _tmp6_;
	gchar* _tmp7_;
	GDestroyNotify _tmp8_;
	gint _tmp9_;
	sqlite3_stmt* _tmp10_;
#line 173 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 173 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_val_if_fail (_name != NULL, 0);
#line 178 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp0_ = g_strdup ("\n" \
"            SELECT COUNT (*) FROM markets WHERE name = ?;\n" \
"        ");
#line 178 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (sql);
#line 178 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	sql = _tmp0_;
#line 182 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp1_ = self->priv->db;
#line 182 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp2_ = sql;
#line 182 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp4_ = sqlite3_prepare_v2 (_tmp1_, _tmp2_, -1, &_tmp3_, NULL);
#line 182 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 182 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	stmt = _tmp3_;
#line 182 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = _tmp4_;
#line 183 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp5_ = res;
#line 183 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp5_ == SQLITE_OK, "res == Sqlite.OK");
#line 185 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp6_ = stmt;
#line 185 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp7_ = g_strdup (_name);
#line 185 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp8_ = g_free;
#line 185 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp6_, 1, _tmp7_, -1, _tmp8_);
#line 186 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp9_ = res;
#line 186 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp9_ == SQLITE_OK, "res == Sqlite.OK");
#line 188 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp10_ = stmt;
#line 188 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	if (sqlite3_step (_tmp10_) == SQLITE_ROW) {
#line 723 "Database.c"
		sqlite3_stmt* _tmp11_;
#line 189 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp11_ = stmt;
#line 189 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		if (sqlite3_column_int (_tmp11_, 0) > 0) {
#line 729 "Database.c"
			sqlite3_stmt* _tmp12_;
			gchar* _tmp13_;
			sqlite3* _tmp14_;
			const gchar* _tmp15_;
			sqlite3_stmt* _tmp16_ = NULL;
			gint _tmp17_;
			gint _tmp18_;
			sqlite3_stmt* _tmp19_;
			gchar* _tmp20_;
			GDestroyNotify _tmp21_;
			gint _tmp22_;
			sqlite3_stmt* _tmp23_;
#line 190 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp12_ = stmt;
#line 190 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			sqlite3_reset (_tmp12_);
#line 192 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp13_ = g_strdup ("\n" \
"                    SELECT id FROM markets WHERE name = ?;\n" \
"                ");
#line 192 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_g_free0 (sql);
#line 192 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			sql = _tmp13_;
#line 196 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp14_ = self->priv->db;
#line 196 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp15_ = sql;
#line 196 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp17_ = sqlite3_prepare_v2 (_tmp14_, _tmp15_, -1, &_tmp16_, NULL);
#line 196 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_sqlite3_finalize0 (stmt);
#line 196 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			stmt = _tmp16_;
#line 196 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			res = _tmp17_;
#line 197 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp18_ = res;
#line 197 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_vala_assert (_tmp18_ == SQLITE_OK, "res == Sqlite.OK");
#line 199 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp19_ = stmt;
#line 199 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp20_ = g_strdup (_name);
#line 199 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp21_ = g_free;
#line 199 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			res = sqlite3_bind_text (_tmp19_, 1, _tmp20_, -1, _tmp21_);
#line 200 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp22_ = res;
#line 200 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_vala_assert (_tmp22_ == SQLITE_OK, "res == Sqlite.OK");
#line 202 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_tmp23_ = stmt;
#line 202 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			if (sqlite3_step (_tmp23_) == SQLITE_ROW) {
#line 784 "Database.c"
				sqlite3_stmt* _tmp24_;
#line 203 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				_tmp24_ = stmt;
#line 203 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				result = sqlite3_column_int (_tmp24_, 0);
#line 203 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				_g_free0 (sql);
#line 203 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				_sqlite3_finalize0 (stmt);
#line 203 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				return result;
#line 796 "Database.c"
			} else {
				sqlite3* _tmp25_;
				sqlite3* _tmp26_;
				const gchar* _tmp27_;
#line 205 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				_tmp25_ = self->priv->db;
#line 205 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				_tmp26_ = self->priv->db;
#line 205 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				_tmp27_ = sqlite3_errmsg (_tmp26_);
#line 205 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				g_warning ("Database.vala:205: Error: %d: %s", sqlite3_errcode (_tmp25_), _tmp27_);
#line 206 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				result = 0;
#line 206 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				_g_free0 (sql);
#line 206 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				_sqlite3_finalize0 (stmt);
#line 206 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
				return result;
#line 817 "Database.c"
			}
		} else {
#line 209 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			result = 0;
#line 209 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_g_free0 (sql);
#line 209 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			_sqlite3_finalize0 (stmt);
#line 209 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
			return result;
#line 828 "Database.c"
		}
	} else {
#line 212 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		result = 0;
#line 212 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_g_free0 (sql);
#line 212 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_sqlite3_finalize0 (stmt);
#line 212 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		return result;
#line 839 "Database.c"
	}
#line 173 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (sql);
#line 173 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 845 "Database.c"
}


gboolean
trade_sim_services_database_is_database_empty (TradeSimServicesDatabase* self)
{
	gboolean result = FALSE;
	gboolean empty = FALSE;
	sqlite3_stmt* stmt = NULL;
	gint res = 0;
	sqlite3* _tmp0_;
	sqlite3_stmt* _tmp1_ = NULL;
	gint _tmp2_;
	gint _tmp3_;
	sqlite3_stmt* _tmp4_;
#line 267 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 268 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	empty = FALSE;
#line 271 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp0_ = self->priv->db;
#line 271 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp2_ = sqlite3_prepare_v2 (_tmp0_, "SELECT COUNT (*) FROM quotes", -1, &_tmp1_, NULL);
#line 271 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 271 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	stmt = _tmp1_;
#line 271 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	res = _tmp2_;
#line 272 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp3_ = res;
#line 272 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_vala_assert (_tmp3_ == SQLITE_OK, "res == Sqlite.OK");
#line 274 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_tmp4_ = stmt;
#line 274 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	if (sqlite3_step (_tmp4_) == SQLITE_ROW) {
#line 883 "Database.c"
		sqlite3_stmt* _tmp5_;
#line 275 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		_tmp5_ = stmt;
#line 275 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
		empty = sqlite3_column_int (_tmp5_, 0) <= 0;
#line 889 "Database.c"
	}
#line 278 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	result = empty;
#line 278 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 278 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	return result;
#line 897 "Database.c"
}


static void
trade_sim_services_database_class_init (TradeSimServicesDatabaseClass * klass)
{
#line 1 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	trade_sim_services_database_parent_class = g_type_class_peek_parent (klass);
#line 1 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	g_type_class_add_private (klass, sizeof (TradeSimServicesDatabasePrivate));
#line 1 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	G_OBJECT_CLASS (klass)->finalize = trade_sim_services_database_finalize;
#line 910 "Database.c"
}


static void
trade_sim_services_database_instance_init (TradeSimServicesDatabase * self)
{
#line 1 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	self->priv = TRADE_SIM_SERVICES_DATABASE_GET_PRIVATE (self);
#line 919 "Database.c"
}


static void
trade_sim_services_database_finalize (GObject * obj)
{
	TradeSimServicesDatabase * self;
#line 1 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TRADE_SIM_SERVICES_TYPE_DATABASE, TradeSimServicesDatabase);
#line 3 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_sqlite3_close0 (self->priv->db);
#line 4 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	_g_free0 (self->priv->db_path);
#line 1 "/home/horacio/Vala/TradeSim/src/Services/Database.vala"
	G_OBJECT_CLASS (trade_sim_services_database_parent_class)->finalize (obj);
#line 935 "Database.c"
}


GType
trade_sim_services_database_get_type (void)
{
	static volatile gsize trade_sim_services_database_type_id__volatile = 0;
	if (g_once_init_enter (&trade_sim_services_database_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (TradeSimServicesDatabaseClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) trade_sim_services_database_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TradeSimServicesDatabase), 0, (GInstanceInitFunc) trade_sim_services_database_instance_init, NULL };
		GType trade_sim_services_database_type_id;
		trade_sim_services_database_type_id = g_type_register_static (G_TYPE_OBJECT, "TradeSimServicesDatabase", &g_define_type_info, 0);
		g_once_init_leave (&trade_sim_services_database_type_id__volatile, trade_sim_services_database_type_id);
	}
	return trade_sim_services_database_type_id__volatile;
}



